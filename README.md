# متابعتي – تطبيق ويب لتتبع العادات والمهام

متابعتي هو تطبيق ويب تقدمي (PWA) مصمم خصيصاً لتجربة هاتفية باللغة العربية تتيح لك بناء مشاريع متعددة، تقسيمها إلى أقسام، ثم متابعة الإنجاز عبر جداول تفاعلية يمكن تخصيصها بالكامل والعمل عليها بدون اتصال بالإنترنت.

- **شاهد الديمو المباشر**: [https://albaraadev.github.io/tracking-me/](Track me)

---

## محتويات الفهرس
1. [الميزات الرئيسية](#الميزات-الرئيسية)
2. [كيف يعمل التطبيق؟](#كيف-يعمل-التطبيق)
3. [بنية الكود والمنهجية](#بنية-الكود-والمنهجية)
4. [التخزين والنسخ الاحتياطي](#التخزين-والنسخ-الاحتياطي)
5. [التشغيل محلياً](#التشغيل-محلياً)
6. [بناء مستقبل التطبيق](#بناء-مستقبل-التطبيق)

---

## الميزات الرئيسية
- **تنظيم هرمي**: مشروع → أقسام → جداول متابعة.
- **نوعان من الجداول**:
  - جدول الحالات (منجز/فاتني/جزئي مع ملاحظات جزئية).
  - جدول الملاحظات (خلايا نصية مع منبثق لعرض النص الكامل).
- **تخصيص مرن للأعمدة والصفوف** مع معالجات إعداد سريع (أسبوع، أسبوعان، شهر).
- **تجربة هاتفية بالكامل** مع واجهة عربية وRTL، وترويسة ديناميكية حسب السياق (الرئيسية، المشروع، القسم).
- **PWA** يعمل بلا اتصال بفضل Service Worker و`localStorage`.
- **استيراد/تصدير JSON** ونسخ احتياطية تلقائية في المتصفح.
- **تخصيص الملف الشخصي** باسم وأيقونة تعبيرية تظهر في الواجهة.

---

## كيف يعمل التطبيق؟

### 1. الصفحة الرئيسية
- تعرض كل المشاريع في بطاقات مختصرة.
- من خلال الترويسة تستطيع تصدير أو استيراد البيانات، بينما زر “مشروع جديد” يقود إلى معالج إنشاء مشروع.
- زر “استعادة النسخة الاحتياطية” يسمح بالرجوع إلى آخر نسخة محفوظة تلقائياً.

### 2. عرض المشروع
- الترويسة تتحول لإظهار اسم المشروع ووصفه ومدته.
- عنوان “أقسام المشروع” يتجاور مع زر “قسم جديد”.
- كل قسم يظهر كبطاقة تلخص النوع وعدد الأعمدة/العناصر.

### 3. عرض القسم
- يتم تبديل الترويسة لإظهار اسم القسم مع وصفه وتواريخ المتابعة.
- شريط أدوات أعلى الصفحة يوفر الوصول السريع إلى:
  - إعداد بنية الجدول (تعديل أسماء الأعمدة والصفوف).
  - تحرير بيانات القسم.
  - قائمة خيارات القسم (حذف، إعدادات إضافية مستقبلية).
- أسفل الشريط بطاقة إحصائية تلخص نوع الجدول وحجمه والفترة الزمنية.
- الجدول نفسه يُعرض بنسق شبكة، ومع النقر على الخلايا يظهر حوار الحالة أو الملاحظة:
  - **الحالة الخضراء** (منجز)، **الحمراء** (فاتني)، **الصفراء** (جزئي مع ملاحظة).
  - في جدول الملاحظات يتم حفظ نصوص طويلة مع إظهار مختصر في الخلية.

---

## بنية الكود والمنهجية

### تصميم عام
- **Vanilla JS + CSS**: تم تجنب الأطر الثقيلة لإبقاء التطبيق خفيفاً وسهل الصيانة.
- **تقسيم الملفّات**:
  - `src/app.js`: واجهة المستخدم، إدارة الحالة، إدارة DOM.
  - `src/state-manager.js`: مصدر الحقيقة الوحيد، يشبه Redux بسيط بإشعار المستمعين.
  - `src/models.js`: منشئات الكيانات (مشروع، قسم، جدول) ودوال المساعدة لإعادة بناء الجداول.
  - `src/storage.js`: التعامل مع `localStorage`، التحقق من الإصدار، النسخ الاحتياطية.
  - `src/utils.js`: أدوات عامة (توليد معرفات، النسخ العميق بأمان).
- **الفصل بين البيانات والعرض**: لا يتم تعديل البيانات مباشرة في DOM؛ كل تغييرات الحالة تمر عبر `state-manager`.
- **رد الفعل على الحالة**: أي تغيير في البيانات ينشئ نسخة جديدة ويحفظها ثم يعيد رسم الواجهة (`render()`).

### أسلوب العمل
1. **Initialization**: يتم تحميل البيانات من `localStorage` أو إنشاء نسخة افتراضية. الاشتراك في التغييرات يضمن إعادة بناء الواجهة.
2. **State Mutations**: كل عملية (إضافة مشروع، تحديث قسم، تعديل خلية) تنفذ عبر دالة متخصصة في `state-manager.js`.
3. **Rendering**: يتم تفكيك العرض إلى وظائف صغيرة (`renderHomeView`, `renderProjectView`, `renderSectionView`) لتقليل التعقيد.
4. **Dialogs & Sheets**: تمت هيكلتها عبر دوال إنشاء موحدة تبني العناصر وتعيد كائنات للتحكم (فتح/إغلاق) مما يجعل الكود مقروءاً.
5. **PWA & Offline**: خدمة عامل تخزن الملفات الأساسية (`service-worker.js`)، وملف `manifest.webmanifest` يعرّف الأيقونات والوضع المستقل.

### تدفق البيانات
```
User Action → state-manager (mutate draft) → storage.saveAppData()
             ↓ notify subscribers
        app.js render() → تحديث الترويسة + عرض السياق الحالي
```

---

## التخزين والنسخ الاحتياطي
- **المكان الأساسي**: `localStorage` تحت المفتاح `mutabaa:data:v1`.
- **نسخ احتياطية**: كل عملية حفظ تنشئ نسخة احتياطية (`mutabaa:data:v1:backup`) تحتوي على الطابع الزمني.
- **التصدير**: يتم توليد ملف JSON يحمل بيانات التطبيق كاملة مع `exportedAt`.
- **الاستيراد**: قراءة الملف والتحقق من رقم الإصدار ثم استبدال الحالة الحالية.
- **الاستعادة**: محاولة استرجاع آخر نسخة احتياطية محلية مع تنبيه المستخدم بالنتيجة.

---

## التشغيل محلياً

1. **التثبيت**
   ```bash
   git clone <repo-url>
   cd track-training
   ```

2. **تشغيل خادم محلي بسيط**  
   يمكن استخدام أي خادم ساكن، مثال:
   ```bash
   python3 -m http.server 5173
   ```
   ثم افتح المتصفح على `http://localhost:5173`.

3. **إضافة التطبيق إلى الشاشة الرئيسية**  
   افتح في الهاتف أو وضع محاكاة الهاتف، اختر *Add to Home Screen* للاستفادة من قدرات PWA.

---

## بناء مستقبل التطبيق
- **الإحصاءات والرسوم البيانية**: تحويل بيانات الجداول إلى مؤشرات أسبوعية/شهرية.
- **تنبيهات محلية**: استخدام إشعارات PWA للتذكير بالعادات.
- **مزامنة اختيارية**: لاحقاً يمكن ربط واجهة API للمزامنة بين الأجهزة.
- **قوالب جاهزة**: إنشاء مكتبة من نماذج المشاريع/الأقسام لتسريع البداية.

---

> إذا كانت لديك أي أفكار أو تحسينات إضافية، شاركها وسيكون من السهل دمجها بفضل التركيبة البسيطة والواضحة للتطبيق ✨
